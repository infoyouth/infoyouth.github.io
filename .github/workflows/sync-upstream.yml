name: ğŸ¤– Sync with Chirpy Starter ğŸ’«

on:
  schedule:
    - cron: '0 0 * * 1'  # â° Runs weekly at midnight on Monday
  workflow_dispatch:  # ğŸš€ Allows manual run of the workflow

jobs:
  update:
    runs-on: ubuntu-latest  # ğŸ–¥ï¸ Uses the latest Ubuntu runner

    steps:
      # Step 1: Checkout your repository
      - name: ğŸ› ï¸ Checkout Repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0  # ğŸ“œ Ensure all history is fetched

      # Step 2: Configure git to pull from upstream chirpy-starter
      - name: ğŸ”— Set up Upstream Repository
        run: |
          git remote add upstream https://github.com/cotes2020/chirpy-starter.git
          git fetch upstream  # ğŸšš Fetch updates from upstream

      # Step 3: Create a new branch for the update
      - name: ğŸŒ¿ Create Update Branch
        run: |
          git checkout -b update-chirpy-starter  # ğŸŒ± Create a new branch for updates
          git merge upstream/master --no-edit  # ğŸ”€ Merge upstream changes

      # Step 4: Push the update branch to your repository
      - name: ğŸ“¤ Push Update Branch
        run: |
          git push origin update-chirpy-starter  # ğŸŒ Push the new branch to origin

      # Step 5: Create a Pull Request with a Code Review Request
      - name: ğŸ“‹ Create Pull Request and Request Code Review ğŸ‘€
        uses: peter-evans/create-pull-request@v5
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          base: main  # ğŸ”§ Target branch (main or master)
          head: update-chirpy-starter  # ğŸŒ¿ PR source branch
          title: 'ğŸš€ Update from upstream chirpy-starter'
          body: 'âœ¨ This is an automated update from the chirpy-starter repository. Please review the changes and merge when ready.'
          reviewers: infoyouth  # ğŸ” Request code review from @infoyouth
          draft: false  # ğŸ”’ Create a non-draft pull request (ready to review)

